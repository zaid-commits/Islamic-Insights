<!DOCTYPE html>
<html lang="en" class="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Islamic Insights</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#f0fdfa",
                100: "#ccfbf1",
                200: "#99f6e4",
                300: "#5eead4",
                400: "#2dd4bf",
                500: "#14b8a6",
                600: "#0d9488",
                700: "#0f766e",
                800: "#115e59",
                900: "#134e4a",
              },
              secondary: {
                50: "#fdf2f8",
                100: "#fce7f3",
                200: "#fbcfe8",
                300: "#f9a8d4",
                400: "#f472b6",
                500: "#ec4899",
                600: "#db2777",
                700: "#be185d",
                800: "#9d174d",
                900: "#831843",
              },
              accent: {
                50: "#fff7ed",
                100: "#ffedd5",
                200: "#fed7aa",
                300: "#fdba74",
                400: "#fb923c",
                500: "#f97316",
                600: "#ea580c",
                700: "#c2410c",
                800: "#9a3412",
                900: "#7c2d12",
              },
            },
            fontFamily: {
              sans: ["Poppins", "sans-serif"],
              arabic: ["Noto Naskh Arabic", "serif"],
            },
          },
        },
      };
    </script>
    <style>
        body{
            font-family: 'Inter';
            font-weight: 500;
        }
      @layer utilities {
        .text-shadow {
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
      }
    </style>
  </head>
  <body
    class="font-Inter bg-gradient-to-br from-primary-100 to-secondary-100 dark:from-gray-900 dark:to-gray-800 text-gray-800 dark:text-gray-200 transition-colors duration-300"
  >
    <div class="min-h-screen flex flex-col">
      <header class="bg-white dark:bg-gray-800 shadow-lg">
        <nav class="container mx-auto px-6 py-4">
          <div class="flex justify-between items-center">
            <a href="#" class="btn-logo text-3xl font-bold">Islamic Insights</a>
            <div class="flex items-center space-x-4">
              <button id="search-btn" class="btn-icon">
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                  ></path>
                </svg>
              </button>
              <button id="theme-toggle" class="btn-icon">
                <svg
                  class="w-6 h-6 dark:hidden"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                  ></path>
                </svg>
                <svg
                  class="w-6 h-6 hidden dark:inline"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                  ></path>
                </svg>
              </button>
            </div>
          </div>
        </nav>
      </header>

      <main class="flex-grow container mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto">
          <div
            id="content"
            class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 mb-10 transform hover:scale-105 transition-all duration-300 border border-primary-200 dark:border-primary-700"
          >
            <p
              id="content-arabic"
              class="text-4xl mb-6 text-center font-arabic leading-relaxed text-primary-700 dark:text-primary-300"
            ></p>
            <p
              id="content-text"
              class="text-2xl mb-6 text-center font-semibold text-gray-800 dark:text-gray-200"
            ></p>
            <p
              id="content-translation"
              class="text-xl text-gray-600 dark:text-gray-400 text-center mb-4"
            ></p>
            <p
              id="content-source"
              class="text-sm text-secondary-600 dark:text-secondary-400 text-center"
            ></p>
          </div>

          <button id="play-pause-btn" class="btn-primary py-5 mb-4 py-8 hidden">
            <svg class="w-6 h-6 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Play
        </button>
          <audio id="verse-audio" class="w-full mt-4 hidden"></audio>
          <div class="flex flex-wrap justify-center gap-6 mb-10">
            <button onclick="getWisdom('advice')" class="btn-primary">
              Advice
            </button>
            <button onclick="getWisdom('hadith')" class="btn-primary">
              Hadith
            </button>
            <button onclick="getWisdom('quran')" class="btn-primary">
              Quran Verse
            </button>
            <button onclick="getPrayerTimes()" class="btn-primary">
              Prayer Times
            </button>
          </div>

          <div class="flex flex-wrap justify-center gap-6 mb-10">
            <button onclick="shareContent()" class="btn-secondary">
              <svg
                class="w-5 h-5 mr-2 inline"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"
                ></path>
              </svg>
              Share
            </button>
            <button onclick="favoriteContent()" class="btn-accent">
              <svg
                class="w-5 h-5 mr-2 inline"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                ></path>
              </svg>
              Favorite
            </button>
          </div>

          <button id="show-favorites-btn" class="btn-secondary mx-auto block">
            Show Favorites
          </button>
        </div>
      </main>

      <footer class="bg-white dark:bg-gray-800 shadow-lg mt-auto">
        <div
          class="container mx-auto px-6 py-4 text-center text-sm text-gray-600 dark:text-gray-400"
        >
          <p>
            &copy; 2024 Islamic Insights | Crafted with love by Zaid Rakhange
            <svg
              class="w-4 h-4 inline text-accent-500"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </p>
        </div>
      </footer>
    </div>

    <!-- Favorites Modal -->
    <div
      id="favorites-modal"
      class="fixed inset-0 z-50 hidden overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center"
    >
      <div
        class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-lg w-full mx-4 border border-primary-200 dark:border-primary-700"
      >
        <h2
          class="text-3xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-primary-500 to-secondary-500"
        >
          Favorite Wisdoms
        </h2>
        <ul
          id="favorites-list"
          class="divide-y divide-gray-200 dark:divide-gray-700 mb-6"
        >
          <!-- Favorite items will be dynamically added here -->
        </ul>
        <button id="close-favorites-btn" class="btn-primary mx-auto block">
          Close
        </button>
      </div>
    </div>

    <!-- Search Modal -->
    <div
      id="search-modal"
      class="fixed inset-0 z-50 hidden overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center"
    >
      <div
        class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-lg w-full mx-4 border border-primary-200 dark:border-primary-700"
      >
        <h2
          class="text-3xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-primary-500 to-secondary-500"
        >
          Search Wisdoms
        </h2>
        <input
          type="text"
          id="search-input"
          class="w-full px-4 py-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 mb-4"
          placeholder="Enter keywords..."
        />
        <button id="search-submit" class="btn-primary mx-auto block mb-4">
          Search
        </button>
        <div id="search-results" class="mt-4">
          <!-- Search results will be dynamically added here -->
        </div>
        <button id="close-search-btn" class="btn-secondary mx-auto block mt-6">
          Close
        </button>
      </div>
    </div>
    <!-- Prayer Times Modal -->
    <div
      id="prayer-times-modal"
      class="fixed inset-0 z-50 hidden overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center"
    >
      <div
        class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-lg w-full mx-4 border border-primary-200 dark:border-primary-700"
      >
        <h2
          class="text-3xl font-bold mb-6 text-center text-transparent bg-clip-text bg-gradient-to-r from-primary-500 to-secondary-500"
        >
          Prayer Times
        </h2>
        <div id="prayer-times-content" class="mb-6">
          <!-- Prayer times will be dynamically added here -->
        </div>
        <button id="close-prayer-times-btn" class="btn-primary mx-auto block">
          Close
        </button>
      </div>
    </div>

    <style>
      .btn {
        @apply px-8 py-4 text-lg font-semibold rounded-full shadow-md transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-opacity-75;
      }
      .btn-primary {
        @apply btn bg-gradient-to-r from-primary-500 to-secondary-500 hover:from-primary-600 hover:to-secondary-600 text-white focus:ring-primary-400;
      }
      .btn-secondary {
        @apply btn bg-gradient-to-r from-secondary-500 to-accent-500 hover:from-secondary-600 hover:to-accent-600 text-white focus:ring-secondary-400;
      }
      .btn-accent {
        @apply btn bg-gradient-to-r from-accent-500 to-primary-500 hover:from-accent-600 hover:to-primary-600 text-white focus:ring-accent-400;
      }
      .btn-logo {
        @apply px-6 py-2 rounded-full bg-gradient-to-r from-primary-500 to-secondary-500 text-white transition-all duration-300 hover:from-primary-600 hover:to-secondary-600 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-opacity-75;
      }
      .btn-icon {
        @apply p-3 rounded-full bg-gray-200 dark:bg-gray-700 text-primary-500 dark:text-primary-400 hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-opacity-75 transition-colors duration-300;
      }
    </style>

    <script>
      // Your existing JavaScript code here
      // Make sure to update the classes for buttons to match the new design

      // Add these new functions and event listeners

      const playPauseBtn = document.getElementById('play-pause-btn');
const audioElement = document.getElementById('verse-audio');

playPauseBtn.addEventListener('click', () => {
    if (audioElement.paused) {
        audioElement.play();
        playPauseBtn.innerHTML = `
            <svg class="w-6 h-6 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Pause
        `;
    } else {
        audioElement.pause();
        playPauseBtn.innerHTML = `
            <svg class="w-6 h-6 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            Play
        `;
    }
});

      function toggleDarkMode() {
        const htmlElement = document.documentElement;
        htmlElement.classList.toggle("dark");
        const isDarkMode = htmlElement.classList.contains("dark");
        localStorage.setItem("isDarkMode", isDarkMode);
      }

      document
        .getElementById("theme-toggle")
        .addEventListener("click", toggleDarkMode);

      const isDarkMode = localStorage.getItem("isDarkMode") === "true";
      if (isDarkMode) {
        document.documentElement.classList.add("dark");
      }

      document.getElementById("search-btn").addEventListener("click", () => {
        document.getElementById("search-modal").classList.remove("hidden");
      });

      document
        .getElementById("close-search-btn")
        .addEventListener("click", () => {
          document.getElementById("search-modal").classList.add("hidden");
        });

      document.getElementById("search-submit").addEventListener("click", () => {
        const searchTerm = document
          .getElementById("search-input")
          .value.toLowerCase();
        const searchResults = favorites.filter(
          (item) =>
            item.content.toLowerCase().includes(searchTerm) ||
            item.arabic.toLowerCase().includes(searchTerm) ||
            item.translation.toLowerCase().includes(searchTerm)
        );

        const resultsContainer = document.getElementById("search-results");
        resultsContainer.innerHTML = "";

        if (searchResults.length === 0) {
          resultsContainer.innerHTML =
            '<p class="text-center text-gray-600 dark:text-gray-400">No results found.</p>';
        } else {
          searchResults.forEach((result) => {
            const resultItem = document.createElement("div");
            resultItem.classList.add(
              "bg-gray-100",
              "dark:bg-gray-700",
              "rounded-lg",
              "p-4",
              "mb-4"
            );
            resultItem.innerHTML = `
                        <p class="text-lg font-arabic">${result.arabic}</p>
                        <p class="text-xl font-bold">${result.content}</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400">${result.translation}</p>
                        <p class="text-xs text-primary-600 dark:text-primary-400">${result.source}</p>
                    `;
            resultsContainer.appendChild(resultItem);
          });
        }
      });

      // Function to fetch and display a random wisdom
      async function getWisdom(type) {
        try {
          switch (type) {
            case "advice":
              const adviceResponse = await fetch(
                "https://api.adviceslip.com/advice"
              );
              const adviceData = await adviceResponse.json();
              updateContent(adviceData.slip.advice, "", "Advice Slip API");
              break;
            case "hadith":
              const randomHadith =
                hadiths[Math.floor(Math.random() * hadiths.length)];
              updateContent(randomHadith.hadith, "", randomHadith.reference);
              break;
            case "quran":
              const randomSura = Math.floor(Math.random() * 114) + 1;
              const [arabicResponse, englishResponse, audioResponse] =
                await Promise.all([
                  fetch(`${QURAN_API_BASE_URL}/surah/${randomSura}/ar.alafasy`),
                  fetch(`${QURAN_API_BASE_URL}/surah/${randomSura}/en.asad`),
                  fetch(`${QURAN_API_BASE_URL}/surah/${randomSura}/ar.alafasy`),
                ]);
              const [arabicData, englishData, audioData] = await Promise.all([
                arabicResponse.json(),
                englishResponse.json(),
                audioResponse.json(),
              ]);
              const randomAya = Math.floor(
                Math.random() * arabicData.data.ayahs.length
              );
              const arabicVerse = arabicData.data.ayahs[randomAya];
              const englishVerse = englishData.data.ayahs[randomAya];
              const audioVerse = audioData.data.ayahs[randomAya];
              updateContent(
                englishVerse.text,
                arabicVerse.text,
                `${englishData.data.englishName} [${englishData.data.englishNameTranslation}] - ${englishVerse.numberInSurah}`,
                englishVerse.translation,
                audioVerse.audio
              );
              break;
              break;
          }
        } catch (error) {
          console.error("Error fetching wisdom:", error);
          updateContent("Error fetching wisdom. Please try again.", "", "");
        }
      }

    //   // Function to update the content displayed on the page
    //   function updateContent(content, arabic, source, translation = "") {
       
    //   }
      function updateContent(content, arabic, source, translation = '', audioUrl = '') {
    // ... (previous code)

    currentContent = content;
        currentArabic = arabic;
        currentSource = source;
        currentTranslation = translation;
        document.getElementById("content-arabic").innerText = arabic;
        document.getElementById("content-text").innerText = content;
        document.getElementById("content-source").innerText = source;
        document.getElementById("content-translation").innerText = translation;
    if (audioUrl) {
        audioElement.src = audioUrl;
        audioElement.classList.remove('hidden');
        playPauseBtn.classList.remove('hidden');
    } else {
        audioElement.classList.add('hidden');
        playPauseBtn.classList.add('hidden');
    }
}

      // Function to share the current wisdom
      function shareContent() {
        const shareData = {
          title: "Islamic Wisdom",
          text: `${currentArabic}\n\n${currentContent}\n\n${currentTranslation}\n\nSource: ${currentSource}`,
          url: window.location.href,
        };
        if (navigator.share) {
          navigator
            .share(shareData)
            .catch((error) => console.error("Error sharing content:", error));
        } else {
          alert("Sharing is not supported on this device.");
        }
      }

      // Function to add the current wisdom to favorites
      function favoriteContent() {
        favorites.push({
          arabic: currentArabic,
          content: currentContent,
          source: currentSource,
          translation: currentTranslation,
        });
        localStorage.setItem("favorites", JSON.stringify(favorites));
        alert("Content added to favorites");
      }

      // Function to load and display the list of favorite wisdoms
      function loadFavorites() {
        const favoritesList = document.getElementById("favorites-list");
        favoritesList.innerHTML = ""; // Clear existing list items

        if (favorites.length === 0) {
          const noFavoritesItem = document.createElement("li");
          noFavoritesItem.textContent = "No favorites yet.";
          favoritesList.appendChild(noFavoritesItem);
        } else {
          favorites.forEach((favorite, index) => {
            const favoriteItem = document.createElement("li");
            favoriteItem.classList.add("py-4", "flex", "flex-col", "gap-2");

            favoriteItem.innerHTML = `
                        <p class="text-lg font-arabic">${favorite.arabic}</p>
                        <p class="text-xl font-bold">${favorite.content}</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400">${favorite.translation}</p>
                        <p class="text-xs text-primary-600 dark:text-primary-400">${favorite.source}</p>
                    `;

            const removeButton = document.createElement("button");
            removeButton.textContent = "Remove";
            removeButton.classList.add("btn-secondary", "mt-2", "self-start");
            removeButton.addEventListener("click", () => {
              favorites.splice(index, 1);
              localStorage.setItem("favorites", JSON.stringify(favorites));
              loadFavorites();
            });
            favoriteItem.appendChild(removeButton);

            favoritesList.appendChild(favoriteItem);
          });
        }
      }

      // Event listener for the "Show Favorites" button
      document
        .getElementById("show-favorites-btn")
        .addEventListener("click", () => {
          const favoritesModal = document.getElementById("favorites-modal");
          favoritesModal.classList.remove("hidden");
          loadFavorites();
        });

      // Event listener for the "Close" button in the favorites modal
      document
        .getElementById("close-favorites-btn")
        .addEventListener("click", () => {
          const favoritesModal = document.getElementById("favorites-modal");
          favoritesModal.classList.add("hidden");
        });

      // Initialize with a random wisdom
      getWisdom(["advice", "hadith", "quran"][Math.floor(Math.random() * 3)]);

      // Hadiths array (you may want to expand this or fetch from an API)
      const hadiths = [
        {
          hadith:
            "The best among you are those who have the best manners and character.",
          reference: "Sahih al-Bukhari 3559",
        },
        {
          hadith:
            "None of you [truly] believes until he loves for his brother what he loves for himself.",
          reference: "Sahih al-Bukhari 13",
        },
        // Add more hadiths here
      ];

      // Constants for API endpoints
      const QURAN_API_BASE_URL = "https://api.alquran.cloud/v1";

      //prayer times
      async function getPrayerTimes() {
        try {
          // Get user's location
          const position = await new Promise((resolve, reject) => {
            navigator.geolocation.getCurrentPosition(resolve, reject);
          });

          const { latitude, longitude } = position.coords;

          // Fetch prayer times
          const response = await fetch(
            `https://api.aladhan.com/v1/timings?latitude=${latitude}&longitude=${longitude}&method=2`
          );
          const data = await response.json();

          const timings = data.data.timings;
          const date = data.data.date.readable;

          // Display prayer times
          const prayerTimesContent = document.getElementById(
            "prayer-times-content"
          );
          prayerTimesContent.innerHTML = `
            <p class="text-center mb-4">Prayer times for ${date}</p>
            <ul class="space-y-2">
                <li>Fajr: ${timings.Fajr}</li>
                <li>Sunrise: ${timings.Sunrise}</li>
                <li>Dhuhr: ${timings.Dhuhr}</li>
                <li>Asr: ${timings.Asr}</li>
                <li>Maghrib: ${timings.Maghrib}</li>
                <li>Isha: ${timings.Isha}</li>
            </ul>
        `;

          // Show the modal
          document
            .getElementById("prayer-times-modal")
            .classList.remove("hidden");
        } catch (error) {
          console.error("Error fetching prayer times:", error);
          alert("Unable to fetch prayer times. Please try again.");
        }
      }

      // Event listener for closing the prayer times modal
      document
        .getElementById("close-prayer-times-btn")
        .addEventListener("click", () => {
          document.getElementById("prayer-times-modal").classList.add("hidden");
        });
    </script>
  </body>
</html>
